<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="portal_my_home" inherit_id="portal.portal_my_home">
        <xpath expr="//div[contains(@class, 'o_portal_my_home')]" position="inside">
            <div t-call="portal.portal_docs_entry" class="pt-4">
                <t t-set="icon">/portal/static/src/img/portal-addresses.svg</t>
                <t t-set="title">Design Requests</t>
                <t t-set="text">Add, remove or view your designs</t>
                <t t-set="url">/my/designs</t>
                <t t-set="config_card">True</t>
            </div>
        </xpath>
    </template>
    <template id="portal_breadcrumbs" inherit_id="portal.portal_breadcrumbs">
        <xpath expr="//ol[hasclass('o_portal_submenu')]" position="inside">
            <li t-if="page_name == 'design_lists' " class="breadcrumb-item">
                <a href="/my/designs">Design</a>
            </li>
            <li t-if="page_name == 'create_design' " class="breadcrumb-item">
                <a href="/my/designs">Design</a> / <a href="/my/create-design">Create Design</a>
            </li>
        </xpath>
    </template>
    <template id="design_lists" name="Design Lists">
        <t t-call="portal.portal_layout">
            <t t-set="my_details" t-value="False"/>
            <div class="wrapper col-12 d-flex flex-wrap justify-content-between align-items-center">
                <h3 class="my-3">Nova Design Lists</h3>
                <a href="/my/create-design" class="btn btn-primary py-2 d-flex align-items-center gap-2 ms-auto">
                    New
                </a>
            </div>
            <div class="row justify-content-between">
                <div t-attf-class="o_portal_content col-12 col-lg-8 mb-5">
                    <div class="o_portal_my_home">
                        <div class="oe_structure" id="oe_structure_portal_my_home_1"/>
                        <div class="o_portal_docs row g-2">
                            <div class="o_portal_doc_spinner spinner-border text-o-color-2 align-self-center mt-5"/>
                            <p class="o_portal_no_doc_message d-none">No Documents to display</p>
                            <div class="o_portal_category row g-2 mt-3" id="portal_common_category">

                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="my-3">
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Customer Email</th>
                            <th>Drawing</th>
                        </tr>
                    </thead>
                    <tbody>
                        <t t-foreach="design_requests" t-as="design">
                            <tr>
                                <td t-esc="design.design_name"/>
                                <td t-esc="design.customer_email"/>
                                <td>
                                    <img t-if="design.design_image" t-att-src="'data:image/png;base64,' + design.design_image.decode('utf-8')" alt="design_img" class="rounded-circle img-fluid" style="width: 60px;"/>
                                </td>
                            </tr>
                        </t>
                    </tbody>
                </table>
            </div>
        </t>
    </template>
    <template id="create_design_template" name="Create Design">
        <t t-call="portal.portal_layout">
            <div class="container">
                <h3>Create New Design</h3>
                <form action="/my/create-design/submit" method="post" enctype="multipart/form-data" class="wrapper col-12 d-flex flex-column gap-3">
                    <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                    <div class="form-group">
                        <label for="design_name">Design Name</label>
                        <input type="text" id="design_name" name="design_name" class="form-control" required="required"/>
                    </div>
                    <div class="form-group">
                        <label for="customer_email">Customer Email</label>
                        <input type="email" class="form-control" id="customer_email" name="customer_email" required="required"/>
                    </div>
                    <div class="form-group">
                        <label for="design_image">Upload Drawing</label>
                        <input type="file" class="file" id="design_image" name="design_image" multiple="true" />
                    </div>
                    <button type="submit" class="btn btn-primary mt-3 me-auto px-3">Submit</button>
                </form>
            </div>
        </t>
    </template>
</odoo>
